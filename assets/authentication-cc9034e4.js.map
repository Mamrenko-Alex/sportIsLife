{"version":3,"file":"authentication-cc9034e4.js","sources":["../../src/js/authentication.js"],"sourcesContent":["import { GoogleAuthProvider, signInWithPopup, signOut } from 'firebase/auth';\nimport { auth } from '../../firebase';\nimport { listOfFavorites } from './utils/firebase';\nimport { addContent } from './favorite/favorite';\nconst provider = new GoogleAuthProvider();\n\nconst SingIn = document.getElementById('sign-in');\nconst SignOut = document.getElementById('sign-out');\nconst User = document.getElementById('user');\nUser.innerHTML = localStorage.getItem('user');\nconst currentUrl = window.location.href.toString();\n\nif (localStorage.getItem('user')) {\n  SignOut.classList.remove('display-none');\n  SingIn.classList.add('display-none');\n  SingIn.style.display = 'none';\n}\nexport const googleSignin = async () => {\n  await signInWithPopup(auth, provider)\n    .then(result => {\n      const credential = GoogleAuthProvider.credentialFromResult(result);\n      const token = credential.accessToken;\n\n      const user = result.user;\n\n      localStorage.user = user.email;\n      User.innerHTML = localStorage.getItem('user');\n      SignOut.classList.remove('display-none');\n      SingIn.classList.add('display-none');\n\n      SingIn.style.display = 'none';\n      listOfFavorites();\n      // addContent();\n    })\n    .catch(error => {\n      const errorMessage = error.message;\n      console.log(errorMessage)\n      const credential = GoogleAuthProvider.credentialFromError(error);\n\n    });\n};\nexport const logOut = async () => {\n  await signOut(auth)\n    .then(() => {\n      User.innerHTML = '';\n      localStorage.removeItem('user');\n\n      let part = currentUrl.slice(-14);\n\n      if (part === favorites.html) {\n        addContent();\n      }\n    })\n    .catch(error => {\n      console.log(error.message); // An error happened.\n    });\n  SignOut.classList.add('display-none');\n  SingIn.classList.remove('display-none');\n  SingIn.style.display = 'flex';\n  localStorage.removeItem('favorites');\n};\n\nSingIn.addEventListener('click', googleSignin);\nSignOut.addEventListener('click', logOut);\n\n"],"names":["provider","GoogleAuthProvider","SingIn","SignOut","User","currentUrl","googleSignin","signInWithPopup","auth","result","user","listOfFavorites","error","errorMessage","logOut","signOut","addContent"],"mappings":"mIAIA,MAAMA,EAAW,IAAIC,EAEfC,EAAS,SAAS,eAAe,SAAS,EAC1CC,EAAU,SAAS,eAAe,UAAU,EAC5CC,EAAO,SAAS,eAAe,MAAM,EAC3CA,EAAK,UAAY,aAAa,QAAQ,MAAM,EAC5C,MAAMC,EAAa,OAAO,SAAS,KAAK,SAAQ,EAE5C,aAAa,QAAQ,MAAM,IAC7BF,EAAQ,UAAU,OAAO,cAAc,EACvCD,EAAO,UAAU,IAAI,cAAc,EACnCA,EAAO,MAAM,QAAU,QAEb,MAACI,EAAe,SAAY,CACtC,MAAMC,EAAgBC,EAAMR,CAAQ,EACjC,KAAKS,GAAU,CACKR,EAAmB,qBAAqBQ,CAAM,EACxC,YAEzB,MAAMC,EAAOD,EAAO,KAEpB,aAAa,KAAOC,EAAK,MACzBN,EAAK,UAAY,aAAa,QAAQ,MAAM,EAC5CD,EAAQ,UAAU,OAAO,cAAc,EACvCD,EAAO,UAAU,IAAI,cAAc,EAEnCA,EAAO,MAAM,QAAU,OACvBS,GAEN,CAAK,EACA,MAAMC,GAAS,CACd,MAAMC,EAAeD,EAAM,QAC3B,QAAQ,IAAIC,CAAY,EACLZ,EAAmB,oBAAoBW,CAAK,CAErE,CAAK,CACL,EACaE,EAAS,SAAY,CAChC,MAAMC,EAAQP,CAAI,EACf,KAAK,IAAM,CACVJ,EAAK,UAAY,GACjB,aAAa,WAAW,MAAM,EAEnBC,EAAW,MAAM,GAAG,IAElB,UAAU,MACrBW,GAER,CAAK,EACA,MAAMJ,GAAS,CACd,QAAQ,IAAIA,EAAM,OAAO,CAC/B,CAAK,EACHT,EAAQ,UAAU,IAAI,cAAc,EACpCD,EAAO,UAAU,OAAO,cAAc,EACtCA,EAAO,MAAM,QAAU,OACvB,aAAa,WAAW,WAAW,CACrC,EAEAA,EAAO,iBAAiB,QAASI,CAAY,EAC7CH,EAAQ,iBAAiB,QAASW,CAAM"}